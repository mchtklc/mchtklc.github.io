$(function(){function a(){if(!webutils.isMobile()){skrollr.init({forceHeight:!1})}$(function(){if($("#dg-container").gallery(),window.location.hash.length>0){var a='a[name="'+window.location.hash.replace("#","")+'"]',b=$(a);b.length&&setTimeout(function(){b[0].click()},500)}}),function(a,b){a.Gallery=function(b,c){this.$el=a(c),this._init(b)},a.Gallery.defaults={current:0,autoplay:!1,interval:2e3},a.Gallery.prototype={_init:function(b){return this.options=a.extend(!0,{},a.Gallery.defaults,b),this.$wrapper=this.$el.find(".dg-wrapper"),this.$items=this.$wrapper.children(),this.itemsCount=this.$items.length,this.$nav=this.$el.find("nav"),this.itemsCount<3?(this.$nav.remove(),!1):(this.current=this.options.current,this.isAnim=!1,this.$items.css({opacity:0,visibility:"hidden"}),this._validate(),this._layout(),this._loadEvents(),void(this.options.autoplay&&this._startSlideshow()))},_validate:function(){(this.options.current<0||this.options.current>this.itemsCount-1)&&(this.current=0)},_layout:function(){this._setItems();var a,b,c;a={transform:"translateX(-350px) translateZ(-200px)","z-index":1},b={transform:"translateX(350px) translateZ(-200px)","z-index":1},a.opacity=1,a.visibility="visible",b.opacity=1,b.visibility="visible",this.$leftItm.css(a||{}).addClass("dg-left"),this.$rightItm.css(b||{}).addClass("dg-right"),this.$currentItm.css(c||{}).css({opacity:1,visibility:"visible","z-index":999}).addClass("dg-center")},_setItems:function(){this.$items.removeClass("dg-center"),this.$currentItm=this.$items.eq(this.current),this.$leftItm=0===this.current?this.$items.eq(this.itemsCount-1):this.$items.eq(this.current-1),this.$rightItm=this.current===this.itemsCount-1?this.$items.eq(0):this.$items.eq(this.current+1),this.itemsCount>3&&(this.$nextItm=this.$rightItm.index()===this.itemsCount-1?this.$items.eq(0):this.$rightItm.next(),this.$nextItm.css(this._getCoordinates("outright")),this.$prevItm=0===this.$leftItm.index()?this.$items.eq(this.itemsCount-1):this.$leftItm.prev(),this.$prevItm.css(this._getCoordinates("outleft")))},_loadEvents:function(){var b=this;a("body").on("click.gallery","a.dg-left",function(a){return a.preventDefault(),b.options.autoplay&&(clearTimeout(b.slideshow),b.options.autoplay=!1),b._navigate("prev"),!1}),a("body").on("click.gallery","a.dg-right",function(a){return a.preventDefault(),b.options.autoplay&&(clearTimeout(b.slideshow),b.options.autoplay=!1),b._navigate("next"),!1}),this.$wrapper.on("webkitTransitionEnd.gallery transitionend.gallery OTransitionEnd.gallery",function(a){b.$currentItm.addClass("dg-center"),b.$items.removeClass("dg-transition"),b.isAnim=!1})},_getCoordinates:function(a){switch(a){case"outleft":return{transform:"translateX(-450px) translateZ(-300px) rotateY(45deg)",opacity:0,visibility:"hidden"};case"outright":return{transform:"translateX(450px) translateZ(-300px) rotateY(-45deg)",opacity:0,visibility:"hidden"};case"left":return{transform:"translateX(-350px) translateZ(-200px) rotateY(45deg)",opacity:1,visibility:"visible","z-index":1};case"right":return{transform:"translateX(350px) translateZ(-200px) rotateY(-45deg)",opacity:1,visibility:"visible","z-index":1};case"center":return{transform:"translateX(0px) translateZ(0px) rotateY(0deg)",opacity:1,visibility:"visible","z-index":999}}},_navigate:function(a){if(this.isAnim)return!1;switch(this.isAnim=!0,a){case"next":this.current=this.$rightItm.index(),this.$currentItm.removeClass("dg-left dg-right").addClass("dg-transition dg-left").css(this._getCoordinates("left")),this.$rightItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("center")),this.$nextItm?(this.$leftItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("outleft")),this.$nextItm.removeClass("dg-left dg-right").addClass("dg-transition dg-right").css(this._getCoordinates("right"))):this.$leftItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("right")).removeClass("dg-left").removeClass("dg-right");break;case"prev":this.current=this.$leftItm.index(),this.$currentItm.removeClass("dg-left dg-right").addClass("dg-transition dg-right").css(this._getCoordinates("right")),this.$leftItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("center")),this.$prevItm?(this.$rightItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("outright")),this.$prevItm.removeClass("dg-left dg-right").addClass("dg-transition dg-left").css(this._getCoordinates("left"))):this.$rightItm.removeClass("dg-left dg-right").addClass("dg-transition").css(this._getCoordinates("left"))}this._setItems()},_startSlideshow:function(){var a=this;this.slideshow=setTimeout(function(){a._navigate("next"),a.options.autoplay&&a._startSlideshow()},this.options.interval)},destroy:function(){this.$wrapper.off(".gallery")}};var c=function(a){this.console&&console.error(a)};a.fn.gallery=function(b){if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var e=a.data(this,"gallery");return e?"function"!=typeof e[b]||"_"===b.charAt(0)?void c("no such method '"+b+"' for gallery instance"):void e[b].apply(e,d):void c("cannot call methods on gallery prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){var c=a.data(this,"gallery");c||a.data(this,"gallery",new a.Gallery(b,this))});return this},window.webutils&&webutils.updateFeaturePriorities("help_center")}(jQuery)}a()});