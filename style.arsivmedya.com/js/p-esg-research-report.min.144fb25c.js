$(function(){function a(a){return"1-9"===a||"10-49"===a||"50-99"===a?(i.hiddenCampaignId.val(i.hiddenCampaignIdSMB.val()),!0):(i.hiddenCampaignId.val(i.hiddenCampaignIdEnt.val()),!1)}function b(){geoUtils.getGeoData().then(function(a){var b="/blog/cx-champions-";switch(a.region){case"LATAM":b+="latin-america/";break;case"APAC":b+="asia-pacific/";break;default:b+="north-america/"}$(".js-promo-regional-download").attr("href",b)}).catch(function(a){console.log(a)})}function c(a){a&&d(a)}function d(b){var c={};j.forEach(function(a){var d=b.mappedFields.indexOf(a),e=b.values[d],f=h.find('[name="'+a+'"]'),g="js-enriched";e&&(c[b.mappedFields[d]]=e,f.val(e).addClass(g))}),c["account[help_desk_size]"]&&a(c["account[help_desk_size]"]),Object.keys(c).length===j.length?f():l.container.hasClass("active")?f():(l.container.addClass("active"),l.container.find(".js-field:first").focus())}function e(a){a.preventDefault();var b=i.email.val();formUtils.preflightValidate(h)&&formUtils.preflightEnrich(b,!0).then(c)}function f(){a(i.size.val());var b={enrich:!1,form:h,trackingParams:{trackingSiteCategory:"RegisterLead",trackingEventName:"content",dataLayerEventName:"resources_form_submit"},successCallback:function(b){var c=b.account.help_desk_size;a(c)?$(".report-resource.smb")[0].click():$(".report-resource.ent")[0].click()}};formUtils.createLeadAndHandleDisplay(b)}function g(){formUtils.defaultInlineValidation(h,l),formUtils.prepopulateCountryField(i.country),formUtils.regionalFieldDisplay(h,k),formUtils.populateHiddenFields(i),formUtils.registerFieldHandlersToSaveInput(),webutils.paramsForEloqua(),m.on("click",e),b()}var h=$(".js-esg-form"),i={company:h.find('input[name="account[name]"]'),country:h.find('select[name="MailingCountry"]'),department:h.find('select[name="department"]'),email:h.find('input[name="owner[email]"]'),firstName:h.find('input[name="FirstName"]'),hiddenFullName:h.find('input[name="owner[name]"]'),industry:h.find('select[name="industry"]'),jobTitle:h.find('input[name="job"]'),lastName:h.find('input[name="LastName"]'),optIn:h.find('input[name="optinToMarketing"]'),phone:h.find('input[name="address[phone]"]'),size:h.find('select[name="account[help_desk_size]"]'),partnerAccount:h.find('input[name="partner_account"]'),partnerContact:h.find('input[name="partner_contact"]'),hiddenCampaignId:h.find('input[name="hiddenCampaignId"]'),hiddenCampaignIdSMB:h.find('input[name="hiddenCampaignIdSMB"]'),hiddenCampaignIdEnt:h.find('input[name="hiddenCampaignIdEnt"]')},j=["account[name]","account[help_desk_size]","industry"],k={firstName:i.firstName.parents(".js-field-wrap"),lastName:i.lastName.parents(".js-field-wrap"),jobTitle:i.jobTitle.parents(".js-field-wrap"),department:i.department.parents(".js-field-wrap")},l={container:h.find(".js-extended-fields"),fields:{company:i.company,size:i.size,industry:i.industry}},m=h.find(".js-submit-btn");g()});