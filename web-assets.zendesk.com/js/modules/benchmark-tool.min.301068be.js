$(function(){function a(){
// </sl:translate>
function a(a,b){b=b||",";for(var c=new RegExp("(\\"+b+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+b+"\\r\\n]*))","gi"),d=[[]],e=null;e=c.exec(a);){var f=e[1];f.length&&f!==b&&d.push([]);var g;g=e[2]?e[2].replace(new RegExp('""',"g"),'"'):e[3],d[d.length-1].push(g)}return d}function b(a){if(!isFinite(a))return 0;for(var b=1,c=0;Math.round(a*b)/b!==a;)b*=10,c++;return c}
// <sl:translate>
var c={sl_translate:"sl_all",industryNames:["Education","Energy","Entertainment & Gaming","Financial Services","Government & Non-profit","Healthcare","IT & Consulting","Marketing & Advertising","Media & Telecommunications","Professional & Business Support Services","Real Estate","Retail","Social Media","Technology","Travel","Other"]},d=[];$.get("https://web-assets.zendesk.com/images/p-benchmark/industry_data.csv",function(e){var f=0,g=2,h=3,i=4,j=6,k=7,l=8;d=a(e,",");for(var m=$(".js-benchmark-tool"),n=d.map(function(a){return a[f]}),o=1;o<n.length;o++){var p=c.industryNames[o-1],q=new Option(p);$(".js-benchmark-tool .industry_selector").append(q)}$(".js-benchmark-tool .industry_selector").on("change",function(){$(".js-benchmark-tool .stats").show();var a=c.industryNames.indexOf($(this).val()),e=d.filter(function(b){return b[f]===d[a+1][0]})[0];if(e){var n=parseInt(e[g].replace(",",""));m.find(".stat--tv .h1 .value").data("targetValue",n),m.find(".stat--csat .h1 .value").data("targetValue",e[h]),m.find(".stat--frt .h1 .value").data("targetValue",e[i]),m.find(".stat--aht .h1 .value").data("targetValue",e[l]),m.find(".stat--ga .h1 .value").data("targetValue",e[j]),m.find(".stat--apps .h1 .value").data("targetValue",e[k]),m.find(".stat .h1 .value").each(function(){var a=parseFloat($(this).text())||0,c=parseFloat($(this).data("targetValue")),d=b(c);$(this).prop("counter",a).animate({counter:c},{duration:1e3,easing:"swing",step:function(a){d>0?$(this).text(a.toFixed(d).toLocaleString()):$(this).text(Math.ceil(a).toLocaleString())}})})}else console.error("Unable to locate industry")})}).fail(function(){console.error("Unable to retrieve industry data")});var e={loginBtns:$(".js-benchmark-login"),registerBtns:$(".js-benchmark-register"),subContainers:$(".js-benchmark-sub-container"),subdomainFields:$(".js-benchmark-subdomain"),surveyPath:"/agent/admin/benchmark_survey",init:function(){var a=this;webutils.getSubdomains().then(function(b){b.length?a.loginBtns.attr("href","//"+b[0]+a.surveyPath):(a.loginBtns.click(a.showLoginForm),a.registerBtns.removeClass("hidden"),a.subdomainFields.on("keyup",a.updateLoginDomain))})},showLoginForm:function(a){a.preventDefault(),e.registerBtns.addClass("hidden"),e.subContainers.removeClass("hidden"),e.loginBtns.unbind("click",e.showLoginForm)},updateLoginDomain:function(a){var b=$(a.currentTarget).val(),c="//"+b+".zendesk.com"+e.surveyPath;e.loginBtns.attr("href",c),13===a.which&&(window.location.href=c)}};e.init()}a()});