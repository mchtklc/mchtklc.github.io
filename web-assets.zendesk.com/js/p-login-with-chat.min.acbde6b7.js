$(document).ready(function(){function a(a,b){"0"===a.css("opacity")&&"1"===b.css("opacity")||(a.css({opacity:0,transition:"opacity "+A}),b.css({visibility:"visible",transition:"margin-left "+A+" ease-in-out","margin-left":0,opacity:1}))}function b(a,b){"1"===a.css("opacity")&&"0"===b.css("opacity")||(a.css({opacity:1,transition:"opacity "+A}),b.css({transition:"margin-left "+A+" ease-in-out, opacity "+A,"margin-left":"490px",opacity:0}).on("transitionend",function(){b.css({visibility:"hidden"}),b.off("transitionend")}))}function c(a){if(!history.state||history.state.form!==a){var b={form:a};history.state&&(b.previous=history.state.form);var c="//"+location.host+location.pathname+location.search+"#"+a;history.pushState(b,"",c),x=a}}function d(a){var b=z.indexOf(a);if(b!==-1&&b!==z.length-1){var d=z[b+1];return c(d),d}}function e(){var b,c=!1;if(history.state)b=history.state.form;else{var e=webutils.parseFragment();b=Object.keys(e).pop(),c=!0}var f=z.indexOf(b);if(b&&f!==-1)for(var g=0;g<f;g++){var h=z[g];h===y.INITIAL&&a(C,D),c&&(x=d(x))}}function f(){return window.location.hostname.indexOf("zendesk-staging")>-1?"zendesk-staging":"zendesk"}function g(){return"null"!==webutils.getURLParameter("return_to",!0)?"?return_to="+webutils.getURLParameter("return_to",!0):""}function h(){B.click(function(b){b.preventDefault(),x=d(x),a(C,D)})}function i(){F.keypress(function(a){13===a.which&&(a.preventDefault(),G.click())})}function j(){F.change(function(){var a=F.val();G.find("a").attr("href","https://"+a+"."+f()+".com/access"+g())})}function k(b){b.preventDefault(),x=d(x),a(E,C)}function l(){H.click(k)}function m(){H.off("click",k)}function n(){window.onpopstate=function(c){if(c.state){var d=c.state.form;d===y.REMINDER&&a(C,D),x=c.state.form}else b(C,D),x=null,window.location.href.indexOf("#")!==-1&&history.replaceState(null,""," ")}}function o(a){a.css("margin-top","-48px").addClass("error").animate({opacity:1,"margin-top":"-5px"},200)}function p(){G.click(function(a){a.preventDefault();var b=F.val();if(!(b&&b.length&&formUtils.isTextValid(F))){if(F.siblings("label").hasClass("error"))return;return I.is(":visible")||o(I),!1}I.animate({display:"none",opacity:0,"margin-top":"-48px"},200),webutils.track({siteCategory:"Login",eventName:"Login_Redirect"}),window.location="https://"+b+"."+f()+".com/access"+g()})}function q(){K.input.keypress(function(a){13==a.which&&(a.preventDefault(),L.click())})}function r(){L.click(function(){var a=K.input.val();return a.length&&"me@example.com"!==a&&webutils.isValidEmail(a)?K.error.animate({display:"none",opacity:0,"margin-top":"-48px"},200,function(){M.show().css({opacity:1}),O.hide(),s(a)}):K.error.is(":visible")||o(K.error),!1})}function s(a){var b="https://support."+f()+".com/accounts/reminder",c={dataType:"jsonp",url:b,data:{email:a},success:function(a){a.success?N.find("span.msg-check-records").css({visibility:"visible",height:"auto"}):(M.find("img").fadeOut("fast"),N.find("span.msg-error").css({visibility:"visible",height:"auto"}))}};$.getJSON(c)}function t(){$(".js-geo-promo").hide(),geoUtils.isUserInRegion("AMER").then(function(a){a?$(".js-geo-promo.js-show-for-amer").show():$(".js-geo-promo.js-show-for-others").show()}).catch(function(a){"null"==webutils.getURLParameter("l10n")?$(".js-geo-promo.js-show-for-amer").show():$(".js-geo-promo.js-show-for-others").show()})}function u(){h(),i(),j(),p(),l(),webutils.showCTA(null,"/access"+g(),{truncationLength:40}).then(function(){webutils.getFormattedSubdomains().then(function(a){if(a&&a.length)return void m()}),$(".subdomainlogin ul a").on("click",function(a){a.preventDefault(),webutils.track({siteCategory:"Login",eventName:"Login_Redirect"}),window.location=$(this).attr("href")})})}function v(){q(),r()}function w(){u(),v(),n(),e(),t(),P.hide()}var x=null,y={INITIAL:null,REMINDER:"loginReminder",previous:function(a){var b=z.indexOf(a)-1;return z[b]},next:function(a){var b=z.indexOf(a)+1;return z[b]}},z=[y.INITIAL,y.REMINDER],A="0.4s",B=$(".reminder-link"),C=$(".login-form"),D=$(".login-remind"),E=$(".login-options"),F=$("#customerUrl"),G=$("#support-login"),H=$("#support-button"),I=$(".form-login").find("label"),J=$(".form-remind"),K={input:J.find("input"),error:J.find("label"),submit:J.find("a.cta")},L=$("#send-reminder"),M=$(".remind-me-result"),N=M.find("p.result"),O=$(".login-remind a.login-opt"),P=$("footer");w()});