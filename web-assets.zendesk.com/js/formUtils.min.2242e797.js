var formUtils={};!function(a){function b(b,c){b.click(function(){var b=a(this).next(".multiselect-dropdown");b.is(":visible")?(b.hide(),c.removeClass("selected")):(b.show(),c.addClass("selected"))})}function c(b){b.change(function(){var b=a(this),c=b.parent();b.prop("checked")?c.addClass("checkbox-item-active"):c.removeClass("checkbox-item-active")})}function d(a){var b=a.find('input[type="checkbox"]');b.prop("checked")?b.prop("checked",!1):b.prop("checked",!0),b.change()}function e(b){b.click(function(){d(a(this))})}function f(b){var c=[13,32];b.keypress(function(b){(c.indexOf(b.code)>-1||c.indexOf(b.keyCode)>-1||c.indexOf(b.charCode)>-1)&&d(a(this))})}function g(a){var b=a.attr("name"),c=a.attr("type");if(!c&&a.is("select")&&(c="select"),!(b&&b.length&&c&&c.length))return"";var d=m.filter(function(a){return b.indexOf(a)>-1});if(d.length)return"";var e="form:"+c+":";if(b.indexOf("[]")>-1){var f=a.attr("id");f.length||console.error("No id attribute on field:",a),e+=f}else e+=b;return e}function h(a){var b=g(a),c=b.length?localStorage.getItem(b):"";return c?JSON.parse(c):""}var i,j=["support","help","postmaster","noreply","no-reply","info"],k=["account[name]","account[help_desk_size]","industry"],l=["name","metrics.employees","category.subIndustry"];formUtils.registerMultiselectDropdownHandlers=function(){var d=a(".multiselect-container .dropdown-field"),g=a(".multiselect-container .dropdown-arrow"),h=a(".multiselect-container .checkbox-item"),i=a('.multiselect-container .checkbox-item input[type="checkbox"]');b(d,g),e(h),c(i),f(h)},formUtils.registerMulticheckboxQuestionHandlers=function(){var b=a(".multicheckbox-container .checkbox-item"),d=a('.multicheckbox-container .checkbox-item input[type="checkbox"]');e(b),c(d),f(b)};var m=["password","telesign","trialSelection"];formUtils.registerFieldHandlersToSaveInput=function(){var b=function(){var b=a(this),c=b.attr("name"),d=b.val(),e=h(b);if(c.length&&d!==e&&formUtils.isFieldValid(b)&&("radio"!==b.attr("type")||b.prop("checked"))){var f=g(b);f.length&&localStorage.setItem(f,JSON.stringify(d)),"account[help_desk_size]"===c&&("radio"===b.attr("type")?localStorage.setItem(f.replace("radio","select"),JSON.stringify(d)):"select"===b.attr("type")&&localStorage.setItem(f.replace("select","radio"),JSON.stringify(d)))}};a("input, select").blur(b),a('input[type="checkbox"], input[type="radio"]').change(b)},formUtils.prepopulateFieldsFromLocalStorage=function(b){a("input, select").each(function(){var c=a(this);if("hidden"!==c.attr("type")){var d=h(c);return"radio"===c.attr("type")?void(c.val()===d&&(c.prop("checked",!0),b&&b(c))):void(d.length&&c.val()!==d&&(c.val(d),b&&b(c)))}})},formUtils.isFieldValid=function(a){var b,c=a.val(),d=a.is(o.password),e=a.is(o.accountSubdomain),f=a.is(o.accountName);if(e?b="subdomain":f?b="company":d?b="password":a.is("select")?b="select":a.is(".js-multiselect")?(b="multiselect",c=!0):b=a.is("textarea")?"textarea":a.attr("type"),!c||!b)return!1;b=b.charAt(0).toUpperCase()+b.slice(1);var g=formUtils["is"+b+"Valid"];return g&&g(c,a)},formUtils.isTextValid=function(a){return""!==a&&formUtils.utf8AlphaNum.test(a)},formUtils.isTextareaValid=function(a){return""!==a&&formUtils.utf8AlphaNum.test(a)},formUtils.isEmailValid=function(a){return formUtils.emailRegexp.test(a)&&!formUtils.isSupportEmail(a)&&!formUtils.isZendeskInstanceEmail(a)},formUtils.isSelectValid=function(a){return!!a.length&&"-"!==a},formUtils.isMultiselectValid=function(a,b){var c=b.find('input[type="checkbox"]');return c.is(":checked")},formUtils.isRadioValid=function(a,b){var c=b.parents("form");return c.find('input[name="'+b.attr("name")+'"]').is(":checked")},formUtils.isPasswordValid=function(a,b){var c=b.parents("form"),d=c.find("[name=owner\\[email\\]]");return a.length>=5&&a!==d.val()},formUtils.isTelValid=function(a){var b=a.replace(/[^0-9]/g,"");return/^\d+$/.test(b)&&b.length>0},formUtils.isNumberValid=function(a){return!isNaN(a)},formUtils.isCheckboxValid=function(a,b){return b.is(":checked")};var n={error:{minLength:"ERROR:InvalidDomainMinLength",maxLength:"ERROR:InvalidDomainMaxLength",invalid:"ERROR:InvalidDomain",unavailable:"ERROR:DomainUnavailable",lookupFailed:"ERROR:DomainLookupFailed",generic:"ERROR:GenericError"},loading:"LOADING:WaitPlease",success:"SUCCESS:ValidSubdomain"};formUtils.isSubdomainValid=function(b,c){function d(a){return a?a.available===!1?n.error.unavailable:a.suggestion?(c.data(g,a.suggestion),c.data(f,a.suggestion),a.suggestion):(c.data(h,b),n.success):n.error.lookupFailed}var e=b.toLowerCase();c.val(e),b=e;var f="lastSuggestion",g="cachedSuggestions["+b+"]",h="cachedSuccessfulDomains["+b+"]",i=c.data(f),j=c.data(g),k=c.data(h),l=3,m=63;formUtils.SUBDOMAIN_REGEX=/[^a-zA-Z0-9\-]/g;var o=["zendesk","support","help","gmail","web-assets","web-assets-mirror"];return"true"===c.data("loading")?n.loading:(formUtils.SUBDOMAIN_REGEX.test(b)&&c.val(b.replace(formUtils.SUBDOMAIN_REGEX,"")),b.length<l?n.error.minLength:b.length>m?n.error.maxLength:formUtils.SUBDOMAIN_REGEX.test(b)||o.indexOf(b)>-1?n.error.invalid:j?d({suggestion:j}):b===i||k?n.success:(c.data("loading","true"),new Promise(function(e,f){a.ajax({url:"/wp-content/themes/zendesk-twentyeleven/lib/domain-check.php",type:"POST",data:{domain:b},cache:!1}).done(function(a){var b=d(a);b===n.success?e(b):f(b)}).fail(function(a){f(n.error.lookupFailed)}).always(function(){c.data("loading",!1)})})))},formUtils.EMOJI_REGEX=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c\ude32-\ude3a]|[\ud83c\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,formUtils.COMPANY_REGEX=/^\u682a\u5f0f\u4f1a\u793e$/,formUtils.isCompanyValid=function(a,b){return formUtils.EMOJI_REGEX.test(a)&&(a=a.replace(formUtils.EMOJI_REGEX,""),b.val(a)),""!==a&&formUtils.utf8AlphaNum.test(a)&&!formUtils.COMPANY_REGEX.test(a)},formUtils.isSupportEmail=function(a){var b,c;for(a=a.toLowerCase(),c=a.split("@")[0],b=0;b<j.length;b++)if(c===j[b])return!0;return!1},formUtils.isZendeskInstanceEmail=function(a){return a.toLowerCase().indexOf(".zendesk.com")!==-1},formUtils.emailRegexp=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,formUtils.utf8AlphaNum=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ一-龠ぁ-んァ-ヴa-zA-Z0-9ａ-ｚＡ-Ｚ０-９ー]+");var o={trialExtraFirstTouch:"input#trial_extras\\[First_Touch__c\\]",trialExtraLastTouch:"input#trial_extras\\[Last_Touch__c\\]",trialExtraTimeOnSite:"input#trial_extras\\[Time_On_Site__c\\]",trialExtraVisits:"input#trial_extras\\[Visits__c\\]",trialExtraPageviews:"input#trial_extras\\[Visits__c\\]",trialExtraWebOffer:"input#trial_extras\\[Web_Offer__c\\]",trialExtraWebOfferName:"input#trial_extras\\[Web_Offer_Name__c\\]",legacyTrialExtraCountryCode:"input#trial_extras\\[DB_CCode__c\\]",legacyTrialExtraCountry:"input#trial_extras\\[Country__c\\]",legacyTrialExtraState:"input#trial_extras\\[DB_State__c\\]",legacyTrialExtraCity:"input#trial_extras\\[DB_City__c\\]",legacyTrialExtraZip:"input#trial_extras\\[DB_Zip__c\\]",legacyTrialExtraRegion:"input#trial_extras\\[Region__c\\]",mailingCountry:"input#MailingCountry",trialExtraCountryCode:"input#trial_extras\\[Inferred_CCode\\]",trialExtraCountry:"input#trial_extras\\[Inferred_Country\\]",trialExtraState:"input#trial_extras\\[Inferred_State\\]",trialExtraCity:"input#trial_extras\\[Inferred_City\\]",trialExtraZip:"input#trial_extras\\[Inferred_Zip\\]",trialExtraRegion:"input#trial_extras\\[Inferred_Region\\]",trialExtraIPAddress:"input#trial_extras\\[Inferred_IP_Address\\]",locationIPAddress:"input#location\\[Inferred_IP_Address\\]",accountName:"input#account\\[name\\]",accountHelpDeskSize:"input#account\\[help_desk_size\\]",accountSubdomain:"input#account\\[subdomain\\]",industry:"input#\\[industry\\]",addressPostal:"input#address\\[postal\\]",password:"input#owner\\[password\\]"},p=!1;formUtils.setMAVs=function(b){if(p)return formUtils.setGeoByIP();var c=cookieUtils.gauge()||{};return a(o.trialExtraFirstTouch).val(c.first_landing_page),a(o.trialExtraLastTouch).val(c.last_landing_page),a(o.trialExtraTimeOnSite).val(c.time_on_site),a(o.trialExtraVisits).val(c.visits),a(o.trialExtraPageviews).val(c.page_views),b&&(a(o.trialExtraWebOffer).val("Trial"),a(o.trialExtraWebOfferName).val("Trial")),cookieUtils.parseCookies(),p=!0,formUtils.setGeoByIP()},formUtils.convertMaxMindCountryName=function(a){var b={Brunei:"Brunei Darussalam","Cabo Verde":"Cape Verde",Czechia:"Czech Republic","Democratic Republic of Timor-Leste":"Timor-Leste","Hashemite Kingdom of Jordan":"Jordan",Iran:"Iran, Islamic Republic of","Ivory Coast":"Cote d'Ivoire",Laos:"Lao People's Democratic Republic",Libya:"Libyan Arab Jamahiriya",Macedonia:"Macedonia, the former Yugoslav Republic of",Palestine:"Palestinian Territory, Occupied","Puerto Rico":"United States","Republic of Korea":"Korea, Republic of","South Korea":"Korea, Republic of","Republic of Lithuania":"Lithuania","Republic of Moldova":"Moldova, Republic of","Réunion":"Reunion",Russia:"Russian Federation","Saint Martin":"Sint Maarten","St Kitts and Nevis":"Saint Kitts and Nevis",Syria:"Syrian Arab Republic",Tanzania:"Tanzania, United Republic of","U.S. Virgin Islands":"United States",Vietnam:"Viet Nam"};return a in b?b[a]:a},formUtils.setGeoByIP=function(){return new Promise(function(b,c){geoUtils.getGeoData().then(function(a){return a.country=formUtils.convertMaxMindCountryName(a.country),a}).then(function(c){a(o.legacyTrialExtraCountryCode).val(c.country_code),a(o.legacyTrialExtraCountry).val(c.country),a(o.legacyTrialExtraState).val(c.state),a(o.legacyTrialExtraCity).val(c.city),a(o.legacyTrialExtraZip).val(c.postal),a(o.legacyTrialExtraRegion).val(c.region),a(o.mailingCountry).val(c.country),a(o.trialExtraCountryCode).val(c.country_code),a(o.trialExtraCountry).val(c.country),a(o.trialExtraState).val(c.state),a(o.trialExtraCity).val(c.city),a(o.trialExtraZip).val(c.postal),a(o.trialExtraRegion).val(c.region),a(o.trialExtraIPAddress).val(c.ipAddress),a(o.locationIPAddress).val(c.ipAddress),a(o.addressPostal).val(c.postal),c.error&&(a(o.legacyTrialExtraCountryCode).val("US"),a(o.trialExtraCountryCode).val("US"),a(o.legacyTrialExtraCountry).val("United States"),a(o.trialExtraCountry).val("United States"),a(o.mailingCountry).val("United States")),b(c)}).catch(function(a){c()})})},formUtils.prepopulatePostalCodeField=function(a){formUtils.setMAVs(!1).then(function(b){a.val(b.postal),a.attr("data-postal",b.postal),a.change()}).catch(function(){})},formUtils.prepopulateCountryField=function(a){formUtils.setMAVs(!1).then(function(b){a.val(b.country),a.change()}).catch(function(){})},formUtils.prepopulateLanguageField=function(a){var b=geoUtils.domainLanguage();0===a.find('option[value="'+b+'"]').length&&(b="en-us"),a.val(b),a.change()},formUtils.scrollToError=function(b){var c=a(".js-sticky-container").outerHeight(),d=b.find(".js-field-error.field-error-active").first(),e=d.parents(".js-field-wrap");a("html, body").animate({scrollTop:e.offset().top-(c+10)},500)},formUtils.renderValidationState=function(a){var b=formUtils.isFieldValid(a),c=a.attr("type");return a.is(o.accountSubdomain)?formUtils.renderSubdomainValidationState(a,b):(b?formUtils.toggleUserMessage(a,!1):formUtils.toggleUserMessage(a,!0),"select"===c&&(b?a.css("color","#3d5154"):a.css("color","#809295")),b)},formUtils.renderSubdomainValidationState=function(a,b){return"function"==typeof b.then?(b.then(function(b){return formUtils.handleSubdomainValidation(a,b)}).catch(function(b){return formUtils.handleSubdomainError(a,b)}),!1):"string"==typeof b?b===n.success?formUtils.handleSubdomainValidation(a,b):formUtils.handleSubdomainError(a,b):"boolean"!=typeof b||b?void 0:formUtils.handleSubdomainError(a)},formUtils.toggleUserMessage=function(a,b,c,d){if(!a.hasClass("js-optional")){var e=a.parents(".js-field-wrap");c=c||"error",d=d||e.find(".js-field-"+c),b?(a.addClass("field-"+c+"-active"),e.removeClass("field-validated js-field-validated"),d&&d.addClass("field-"+c+"-active")):(a.removeClass("field-"+c+"-active"),e.addClass("field-validated js-field-validated"),d&&d.removeClass("field-"+c+"-active"))}},formUtils.handleSubdomainValidation=function(a,b){return formUtils.toggleUserMessage(a,!1,"message"),formUtils.toggleUserMessage(a,!1),!0},formUtils.handleSubdomainError=function(a,b){function c(a){var b=Object.keys(a).map(function(b){return a[b]});return b}var d,e=a.parents(".js-field-wrap");if(formUtils.toggleUserMessage(a,!1),formUtils.toggleUserMessage(a,!1,"message"),b&&c(n.error).indexOf(b)===-1){var f=e.find(".js-field-message.js-loading");return b!==n.loading&&(a.val(b),f=f=e.find(".js-field-message.js-suggestion")),formUtils.toggleUserMessage(a,!0,"message",f),!1}switch(b){case n.error.minLength:d=e.find(".js-field-error.js-invalid-domain-min-length");break;case n.error.maxLength:d=e.find(".js-field-error.js-invalid-domain-max-length");break;case n.error.invalid:d=e.find(".js-field-error.js-invalid-domain");break;case n.error.unavailable:d=e.find(".js-field-error.js-unavailable-domain");break;case n.error.lookupFailed:d=e.find(".js-field-error.js-domain-lookup-failed");break;default:d=e.find(".js-field-error.js-generic-error")}return formUtils.toggleUserMessage(a,!0,"error",d),!1},formUtils.defaultInlineValidation=function(b,c){c=c||!1;var d,e;if(c)var f=function(){c.container.removeClass("active"),c.container.find(".field-error-active").removeClass("field-error-active"),a.each(c.fields,function(){a(this).val("")})};var g=function(){var b=a(this);"active"===b.attr("data-state")&&(window.clearTimeout(d),d=setTimeout(function(){formUtils.renderValidationState(b)},1e3))},h=function(){var b=a(this);"active"!==b.attr("data-state")&&b.attr("data-state","active")},j=function(){var b=a(this);"active"!==b.attr("data-state")&&b.attr("data-state","active"),formUtils.renderValidationState(b)},k=function(){var b,d,g=a(this),h=g.val();formUtils.renderValidationState(g)&&("active"!==g.attr("data-state")&&g.attr("data-state","active"),c&&(e?(b=e.substring(e.lastIndexOf("@")+1),d=h.substring(e.lastIndexOf("@")+1),b!==d&&(f(),i=!1)):e=h))};b.find("select").each(function(b,c){""!==a(c).val()?a(c).css("color","#3d5154"):a(c).css("color","#809295")}),b.on("keyup","input.required, textarea.required",g).on("blur change",'input[name!="owner[email]"].required, textarea.required, select.required, checkbox.required, select.js-optional',j).on("focus","input.required, textarea.required, select.required, checkbox.required, select.js-optional",h).on("blur change",'input[name="owner[email]"].required',k)},formUtils.autofocusFirstField=function(a){var b=a.find("input:visible").first(),c=window.breakpoints?window.breakpoints.small:768;window.innerWidth>c&&b.focus()},formUtils.preflightValidate=function(a){return!!formUtils.allFieldsValid(a,!0)},formUtils.allFieldsValid=function(b,c){for(var d,e=b.find(".required").filter(":visible"),f=!1,g=0,h=[],i=0;i<e.length;i++,g++){var j=!1;j=c?formUtils.renderValidationState(a(e[i])):formUtils.isFieldValid(a(e[i])),j&&"function"==typeof j.then?j.then(function(){h.push(!0)}).catch(function(){h.push(!1)}):j===!0&&h.push(j),i===g&&(d=!0)}return f=h.length===g,d===!0&&f===!0||(c&&webutils.isMobile()&&formUtils.scrollToError(b),!1)},formUtils.preflightEnrich=function(a,b){return formUtils.enrichmentCheck(a,b).then(function(a){return a.isPersonalEmail?webutils.track({siteCategory:"Clearbit",eventName:"UsingPersonalEmail"}):webutils.track({siteCategory:"Clearbit",eventName:"UsingCompanyEmail"}),formUtils.verifyEnrichment(a,b)}).then(function(a){return a}).catch(function(a){console.error(a)})},formUtils.enrichmentCheck=function(b,c){return new Promise(function(d,e){var f=(new Date).getTime(),g=c?"&returndata=true":"";a.ajax({url:webutils.appUrl("v2/email-info.json?email="+encodeURIComponent(b)+g),dataType:"json",success:function(a){var b=(new Date).getTime(),c=Math.round((b-f)/1e3*2)/2;webutils.track({siteCategory:"Clearbit",eventName:"RequestTime",value:{requestTime:c}}),d(a)},error:function(a,b,c){b&&webutils.track({siteCategory:"Clearbit",eventName:"RequestError",value:{error:b}}),e()}})})},formUtils.verifyEnrichment=function(a,b){var c=[],d=!1;return new Promise(function(e,f){b&&e(a),l.forEach(function(b){a.fields.indexOf(b)===-1&&c.push(!1)}),c.indexOf(!1)===-1&&(d=!0),e(d)})},formUtils.setFullNameField=function(a){var b={firstName:a.find('input[name="FirstName"]'),lastName:a.find('input[name="LastName"]'),fullName:a.find('input[name="owner[name]"]')};b.firstName&&b.lastName&&b.fullName&&b.fullName.val(b.firstName.val()+" "+b.lastName.val())},formUtils.handleMultiSelects=function(b){var c=b.find(".js-multiselect");c.length&&c.each(function(){var b=a(this).find(".js-multiselect-hidden"),c=[];a(this).find("input:checked").each(function(){c.push(a(this).val())}),b.val(c.join(","))})},formUtils.handleSubmissionResult=function(a){if(a.successRedirect&&a.resultMessage.hasClass("js-success-message"))return void(window.location.href=a.successRedirect);a.fieldContainer.addClass("hidden"),a.loadingMessage.removeClass("active"),a.hideCustomElements.hide(),a.resultMessage.addClass("active").trigger("submissionResultMessageActiveClassAdded");try{var b=new Event("lead-result-message");a.resultMessage[0].dispatchEvent(b)}catch(a){console.error(a)}},formUtils.trackFormSubmission=function(a){if(a){var b=a.trackingSiteCategory?a.trackingSiteCategory:"",c=a.trackingEventName?a.trackingEventName:"",d=a.trackingValueDataKey?a.trackingValueDataKey:"",e=a.trackingValueDataValue?a.trackingValueDataValue:"",f=a.dataLayerEventName?a.dataLayerEventName:"";if("error"===a.status&&(c+="Failed"),b&&c){var g={};d&&e&&(g[d]=e),webutils.track({siteCategory:b,eventName:c,value:g})}f&&dataLayer.push({event:f})}},formUtils.regionalFieldDisplay=function(a,b){geoUtils.isUserInRegion("LATAM").then(function(a){a&&(b.jobTitle&&b.jobTitle.addClass("active"),b.department&&b.department.addClass("active"))}).catch(function(a){console.error(a)}),geoUtils.isUserInContinentCountry("AS","JP").then(function(a){a&&(b.firstName&&b.lastName&&(b.lastName.remove(),b.lastName.insertBefore(b.firstName)),b.jobTitle&&b.jobTitle.addClass("active"),b.department&&b.department.addClass("active"))}).catch(function(a){console.error(a)})},formUtils.createLeadAndHandleDisplay=function(b){var c=b.form,d=(b.trackingParams,c.find(".js-field-container")),e=c.find(".js-loading"),f=c.find(".js-success-message"),g=c.find(".js-error-message"),h=a(".js-hide-after-process");c.find('input[name="elqFormName"]').val();e.addClass("active");var i={fieldContainer:d,loadingMessage:e,hideCustomElements:h,successRedirect:b.successRedirect,resultMessage:""};formUtils.createLead(b).then(function(a){i.resultMessage=f,"function"==typeof b.successCallback&&b.successCallback(a)}).catch(function(a){i.resultMessage=g,"function"==typeof b.failureCallback&&b.failureCallback(a)}).then(function(){formUtils.handleSubmissionResult(i),"function"==typeof b.alwaysCallback&&b.alwaysCallback()})},formUtils.createLead=function(b){var c,d=b.form,e=b.trackingParams,f=b.clearbitFields||k;return formUtils.setFullNameField(d),formUtils.handleMultiSelects(d),c=b.enrich?d.serialize()+"&enrich="+JSON.stringify(f):d.serialize(),new Promise(function(b,f){a.post(webutils.appUrl("v3/lead"),c).done(function(a){e&&(e.status="success",formUtils.trackFormSubmission(e)),formUtils.identifyFormUser(d),b(a)}).fail(function(a){e&&(e.status="error",formUtils.trackFormSubmission(e)),webutils.postToEloqua(a.responseJSON),f()})})},formUtils.identifyFormUser=function(b){var c=webutils.detectBrowser(),d=b.find('input[name="owner[email]"]').val(),e=b.find(o.trialExtraCity).val(),f=b.find(o.trialExtraCountry).val(),g={email:d,city:e,country:f,ga_id:a.cookie("_ga"),browser_name:c.name,browser_version:c.version};analytics.identify(g)},formUtils.submitContactTicket=function(b){return new Promise(function(c,d){a.post(webutils.appUrl("contact"),b.serialize()).done(function(a){c(a)}).fail(function(){d()})})},formUtils.populateHiddenFields=function(a){a&&(a.referrer&&a.referrer.val(encodeURI(document.referrer).split(/[?#]/)[0]),a.pageUrl&&a.pageUrl.val(encodeURI(document.location).split(/[?#]/)[0]),a.RVaccount&&a.RVaccount.val(webutils.getParameterByName("rv_account")!==-1?webutils.getParameterByName("rv_account"):""),a.RVmember&&a.RVmember.val(webutils.getParameterByName("rv_member")!==-1?webutils.getParameterByName("rv_member"):""),a.partnerAccount&&a.partnerAccount.val(webutils.getParameterByName("partner_account")!==-1?webutils.getParameterByName("partner_account"):""),a.partnerContact&&a.partnerContact.val(webutils.getParameterByName("partner_contact")!==-1?webutils.getParameterByName("partner_contact"):""))},formUtils.resetForm=function(b){b&&(b.find(".js-field-container").removeClass("hidden"),b.trigger("reset"),b.find("select").each(function(){a(this)[0].selectedIndex=0}),b.find(".field-error-active").removeClass("field-error-active"),b.find(".js-success-message").removeClass("active"),b.find(".js-error-message").removeClass("active"),b.find(".js-loading").removeClass("active"))},formUtils.registerGateHandler=function(a){if(a){var b=webutils.getURLParameter("ungated"),c=a.find(".js-field-container"),d=a.find(".js-success-message");if(b){var e=function(){c.addClass("hidden"),d.addClass("active")},f=function(){c.hasClass("hidden")&&(c.removeClass("hidden"),d.removeClass("active"))};"true"===b?(webutils.track({siteCategory:"UngatedContent",eventName:"Download"}),e()):f()}}},formUtils.registerTimeOnForm=function(a,b){function c(){e=0===e?(new Date).getTime():e,f.off("propertychange change click keyup input paste",c)}function d(){var b=(new Date).getTime(),c=b-e;formUtils.setFieldValue("timeStarted",e,a),formUtils.setFieldValue("timeEnded",b,a),formUtils.setFieldValue("timeDelta",c,a)}if(a){var e=0,f=a.find("input:not([type=hidden])");f.one("propertychange change click keyup input paste",c),b?b.click(d):a.submit(d)}},formUtils.setFieldValue=function(a,b,c){c.find("input[name="+a+"]").val(b)}}(jQuery);